<div class="card mt-3" ng-controller="optionsController">
    <div class="card-header">
        <!-- pokemon search bar -->
        <div class="input-group">
            <div class="input-group-prepend">
                <button class="btn btn-secondary" ng-click="seeAllPokemon()">
                    < All Pokemon
                </button>
            </div>
            <input class="form-control" type="text" placeholder="Search Pokemon" ng-model="searchPokemon"
                   uib-typeahead="pokemonName for pokemonName in pokemonNames | filter: $viewValue | limitTo: 7"
                   typeahead-on-select="goToPokemon($label)"/>
            <div class="input-group-append">
                <button class="btn btn-dark" ng-click="goToPokemon(searchPokemon)">
                    Go
                </button>
            </div>
        </div>
    </div>

    <div class="card-body">
        <div class="row">
            <div class="col-6">
                <h5 class="card-title">
                    {{pokemon.name}}
                </h5>
            </div>
            <button class="btn btn-secondary ml-auto mr-3" ng-click="toggleOptions()">
                Options
            </button>
        </div>
    </div>

    <!-- stats -->
    <table class="table table-fixed">
        <tr>
            <th colspan="{{pokemon.type.length}}">Type</th>
            <th>Lv</th>
            <th>ATK</th>
            <th>DEF</th>
            <th>HP</th>
            <th>Bulk</th>
            <th>Total</th>
            <th>CP</th>
        </tr>
        <tr>
            <td colspan="{{pokemon.type.length}}">
                <div class="row">
                    <div class="ml-2"></div>
                    <div ng-repeat="type in pokemon.type" class="ml-3">
                        <div class="icon" ng-class="type.toLowerCase()">
                            <img ng-src="{{getIconPath(type)}}" data-toggle="tooltip" data-placement="top" title="{{type}}">
                        </div>
                    </div>
                </div>
            </td>
            <td>{{pokemon._level}}</td>
            <td>{{pokemon._atk}}</td>
            <td>{{pokemon._def}}</td>
            <td>{{pokemon._hp}}</td>
            <td>{{pokemon._bulk}}</td>
            <td>{{pokemon._total}}</td>
            <td>{{pokemon._cp}}</td>
        </tr>
    </table>

    <div class="card-body" ng-show="showOptions">
        <!-- options -->
        <div>
            <!-- max cp -->
            <div class="input-group mt-3">
                <div class="input-group-prepend">
                    <label class="input-group-text">Max CP:</label>
                </div>
                <input class="form-control" type="number" ng-model="maxCp" readonly>
                <div class="input-group-append">
                    <button class="btn btn-secondary" ng-click="setMaxCp(1500); updatePokemon(); updateScopeLevel()"
                            ng-class="maxCp <= 1500 ? 'btn-dark' : ''">
                        1500
                    </button>
                </div>
                <div class="input-group-append">
                    <button class="btn btn-secondary" ng-click="setMaxCp(2500); updatePokemon(); updateScopeLevel()"
                            ng-class="maxCp > 1500 && maxCp <= 2500 ? 'btn-dark' : ''">
                        2500
                    </button>
                </div>
                <div class="input-group-append">
                    <button class="btn btn-secondary" ng-click="setMaxCp(9999); updatePokemon(); updateScopeLevel()"
                            ng-class="maxCp > 2500 ? 'btn-dark' : ''">
                        None
                    </button>
                </div>
            </div>

            <!-- level -->
            <div class="row mt-3">
                <div class="col-12 col-lg-4">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <label class="input-group-text">Level:</label>
                        </div>
                        <input class="form-control" type="number" step="0.5" ondblclick="this.select()"
                               ng-model="level" ng-change="setLevel(); updatePokemonWithLevel()">
                    </div>
                </div>
                <div class="col-12 col-lg-8">
                    <div class="pt-2">
                        <input type="range" min="1" max="40" step="0.5" class="form-control-range"
                               ng-model="level" ng-change="setLevel(); updatePokemonWithLevel()">
                    </div>
                </div>
            </div>

            <!-- ivs -->
            <div class="row mt-3">
                <!-- atk -->
                <div class="col-12 col-lg-4">
                    <div class="input-group mt-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text">ATK IV:</label>
                        </div>
                        <input class="form-control" type="number" ondblclick="this.select()" ng-model="atkIv"
                               ng-change="validateAtkIv(); updatePokemon(); updateScopeLevel()">
                        <div class="input-group-append">
                            <button class="btn btn-secondary" ng-class="atkIv === 0 ? 'btn-dark' : ''"
                                    ng-click="setAtkIv(0); updatePokemon(); updateScopeLevel()">
                                Min
                            </button>
                            <button class="btn btn-secondary" ng-class="atkIv === 15 ? 'btn-dark' : ''"
                                    ng-click="setAtkIv(15); updatePokemon(); updateScopeLevel()">
                                Max
                            </button>
                        </div>
                    </div>
                </div>
                <!-- def -->
                <div class="col-12 col-lg-4">
                    <div class="input-group mt-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text">DEF IV:</label>
                        </div>
                        <input class="form-control" type="number" ondblclick="this.select()" ng-model="defIv"
                               ng-change="validateDefIv(); updatePokemon(); updateScopeLevel()">
                        <div class="input-group-append">
                            <button class="btn btn-secondary" ng-class="defIv === 0 ? 'btn-dark' : ''"
                                    ng-click="setDefIv(0); updatePokemon(); updateScopeLevel()">
                                Min
                            </button>
                            <button class="btn btn-secondary" ng-class="defIv === 15 ? 'btn-dark' : ''"
                                    ng-click="setDefIv(15); updatePokemon(); updateScopeLevel()" >
                                Max
                            </button>
                        </div>
                    </div>
                </div>
                <!-- hp -->
                <div class="col-12 col-lg-4">
                    <div class="input-group mt-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text">HP IV:</label>
                        </div>
                        <input class="form-control" type="number" ondblclick="this.select()" ng-model="hpIv"
                               ng-change="validateHpIv(); updatePokemon(); updateScopeLevel()">
                        <div class="input-group-append">
                            <button class="btn btn-secondary" ng-class="hpIv === 0 ? 'btn-dark' : ''"
                                    ng-click="setHpIv(0); updatePokemon(); updateScopeLevel()">
                                Min
                            </button>
                            <button class="btn btn-secondary" ng-class="hpIv === 15 ? 'btn-dark' : ''"
                                    ng-click="setHpIv(15); updatePokemon(); updateScopeLevel()">
                                Max
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- iv comparison button -->
            <div class="row mt-3">
                <button class="btn btn-dark ml-auto mr-3" ng-click="saveIvs()">
                    Save IVs
                </button>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-body">
        <h5 class="card-title">Type Chart</h5>
    </div>

    <table class="table table-fixed">
        <!-- type chart -->
        <tr>
            <th class="text-center">Weak (x2)</th>
            <th class="text-center">Weak To</th>
            <th class="text-center">Resists</th>
            <th class="text-center">Resists (x2)</th>
            <th class="text-center">Resists (x3)</th>
        </tr>
        <tr>
            <td class="border-bottom">
                <div class="row pl-2 pr-3">
                    <div ng-repeat="eType in pokemon.typeChart.defending[2.56]" class="col-5 col-md-4 col-lg-3 mt-2 mb-2">
                        <div class="icon" ng-class="eType.toLowerCase()">
                            <img ng-src="{{getIconPath(eType)}}" title="{{eType}}"
                                 data-toggle="tooltip" data-placement="top">
                        </div>
                    </div>
                </div>
            </td>
            <td class="border-left border-bottom">
                <div class="row pl-1 pr-3">
                    <div ng-repeat="eType in pokemon.typeChart.defending[1.6]" class="col-5 col-md-4 col-lg-3 mt-2 mb-2">
                        <div class="icon" ng-class="eType.toLowerCase()">
                            <img ng-src="{{getIconPath(eType)}}" title="{{eType}}"
                                 data-toggle="tooltip" data-placement="top">
                        </div>
                    </div>
                </div>
            </td>
            <td class="border-left border-bottom">
                <div class="row pl-1 pr-3">
                    <div ng-repeat="eType in pokemon.typeChart.defending[0.625]" class="col-5 col-md-4 col-lg-3 mt-2 mb-2">
                        <div class="icon" ng-class="eType.toLowerCase()">
                            <img ng-src="{{getIconPath(eType)}}" title="{{eType}}"
                                 data-toggle="tooltip" data-placement="top">
                        </div>
                    </div>
                </div>
            </td>
            <td class="border-left border-bottom">
                <div class="row pl-1 pr-3">
                    <div ng-repeat="eType in pokemon.typeChart.defending[0.390625]" class="col-5 col-md-4 col-lg-3 mt-2 mb-2">
                        <div class="icon" ng-class="eType.toLowerCase()">
                            <img ng-src="{{getIconPath(eType)}}" title="{{eType}}"
                                 data-toggle="tooltip" data-placement="top">
                        </div>
                    </div>
                </div>
            </td>
            <td class="border-left border-bottom">
                <div class="row pl-1 pr-3">
                    <div ng-repeat="eType in pokemon.typeChart.defending[0.244141]" class="col-5 col-md-4 col-lg-3 mt-2 mb-2">
                        <div class="icon" ng-class="eType.toLowerCase()">
                            <img ng-src="{{getIconPath(eType)}}" title="{{eType}}"
                                 data-toggle="tooltip" data-placement="top">
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div>

<!-- iv comparison -->
<div class="card mt-3" ng-show="showIvs()">
    <div class="card-body">
        <h5 class="card-title">Saved IVs</h5>
    </div>
    <table class="table table-fixed">
        <tr>
            <th colspan="2">IVs</th>
            <th>ATK</th>
            <th>DEF</th>
            <th>HP</th>
            <th>Bulk</th>
            <th>Tot</th>
            <th>CP</th>
            <th></th>
        </tr>
        <tr ng-repeat="ivs in getIvs()">
            <td colspan="2">{{ivs.ivs}}</td>
            <td>{{ivs.atk}}</td>
            <td>{{ivs.def}}</td>
            <td>{{ivs.hp}}</td>
            <td>{{ivs.bulk}}</td>
            <td>{{ivs.total}}</td>
            <td>{{ivs.cp}}</td>
            <td ng-click="removeIvs(ivs)"><span class="close">&times;</span></td>
        </tr>
    </table>
</div>

<!-- moves -->
<div class="card mt-3">
    <div class="card-header">
        <ul class="nav nav-tabs nav-fill card-header-tabs">
            <li class="nav-item">
                <div class="nav-link" ng-class="isPvp() ? 'active' : ''"
                     ng-click="showMovesTab('pvpFast')">PvP</div>
            </li>
            <li class="nav-item">
                <div class="nav-link" ng-class="isPvp() ? '' : 'active'"
                     ng-click="showMovesTab('pveFast')">PvE</div>
            </li>
        </ul>
    </div>

    <div class="card-body row" ng-show="isPvp()">
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Fast Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>T</th>
                        <th>DPT</th>
                        <th>EPT</th>
                    </tr>
                    <tr ng-repeat="move in getFastMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}"
                                     data-toggle="tooltip" data-placement="top" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pvpDamage}}</td>
                        <td>{{move.pvpEnergy}}</td>
                        <td>{{move.pvpTurns}}</td>
                        <td>{{move.pvpDpt}}</td>
                        <td>{{move.pvpEpt}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Charge Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>DPE</th>
                        <th colspan="2">Effect</th>
                    </tr>
                    <tr ng-repeat="move in getChargeMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}"
                                     data-toggle="tooltip" data-placement="top" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pvpDamage}}</td>
                        <td>{{move.pvpEnergy}}</td>
                        <td>{{move.pvpDpe}}</td>
                        <td colspan="2">{{move.pvpEffect}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- pve moves -->
    <div class="card-body row" ng-show="!isPvp()">
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Fast Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>CD</th>
                        <th>DPS</th>
                        <th>EPS</th>
                    </tr>
                    <tr ng-repeat="move in getFastMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}"
                                     data-toggle="tooltip" data-placement="top" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pveDamage}}</td>
                        <td>{{move.pveEnergy}}</td>
                        <td>{{move.pveCooldown}}</td>
                        <td>{{move.pveDps}}</td>
                        <td>{{move.pveEps}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Charge Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>CD</th>
                        <th>DPE</th>
                        <th>DPS</th>
                    </tr>
                    <tr ng-repeat="move in getChargeMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}"
                                     data-toggle="tooltip" data-placement="top" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pveDamage}}</td>
                        <td>{{move.pveEnergy}}</td>
                        <td>{{move.pveCooldown}}</td>
                        <td>{{move.pveDpe}}</td>
                        <td>{{move.pveDps}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>