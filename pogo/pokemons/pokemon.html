<div class="card mt-3">
    <div class="card-body" ng-controller="optionsController">

        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <button class="btn btn-secondary" ng-click="go('/pokemons')">
                    < Back
                </button>
            </div>
            <input class="form-control" type="text" placeholder="Search Pokemon" ng-model="searchPokemon"
                   uib-typeahead="pokemonName for pokemonName in pokemonNames | filter: $viewValue | limitTo: 7"/>
            <div class="input-group-append">
                <button class="btn btn-dark" ng-click="getPokemon(searchPokemon)">
                    Go
                </button>
            </div>
        </div>

        <div class="row">
            <div class="col-6">
                <h5 class="card-title">{{pokemon.name}}</h5>
                <span class="d-none">{{updatePokemon()}}</span>
            </div>
            <button class="btn btn-secondary ml-auto mr-3" ng-click="toggleOptions()">
                Options
            </button>
        </div>

        <!-- options -->
        <form ng-show="showOptions()">

            <!-- max cp -->
            <div class="form-group row">
                <label class="col-4 col-lg-2 mt-2 col-form-label">Max CP:</label>
                <div class="col-8 col-lg-4 mt-2">
                    <input class="form-control" type="number" ng-model="maxCp" ng-change="validateMaxCp()"/>
                </div>
                <div class="btn-group ml-auto mr-3 mt-2" role="group">
                    <button class="btn btn-secondary" ng-click="setMaxCp(1500)"
                            ng-class="maxCp <= 1500 ? 'btn-dark' : ''">
                        GL (1500)
                    </button>
                    <button class="btn btn-secondary" ng-click="setMaxCp(2500)"
                            ng-class="maxCp > 1500 && maxCp <= 2500 ? 'btn-dark' : ''">
                        UL (2500)
                    </button>
                    <button class="btn btn-secondary" ng-click="setMaxCp(9999)"
                            ng-class="maxCp > 2500 ? 'btn-dark' : ''">
                        ML (No Max)
                    </button>
                </div>
            </div>

            <!-- IVs -->
            <div class="form-group row">
                <label class="col-4 col-lg-1 mt-2 col-form-label">ATK IV:</label>
                <div class="col-8 col-lg-2 mt-2">
                    <input class="form-control" ng-model="atkIv" type="number" ng-change="validateAtkIv()"/>
                </div>
                <label class="col-4 col-lg-1 mt-2 col-form-label">DEF IV:</label>
                <div class="col-8 col-lg-2 mt-2">
                    <input class="form-control" ng-model="defIv" type="number" ng-change="validateDefIv()"/>
                </div>
                <label class="col-4 col-lg-1 mt-2 col-form-label">HP IV:</label>
                <div class="col-8 col-lg-2 mt-2">
                    <input class="form-control" ng-model="hpIv" type="number" ng-change="validateHpIv()"/>
                </div>
                <div class="btn-group ml-auto mr-3 mt-2" role="group">
                    <button class="btn btn-dark" ng-click="saveIvs()">
                        Compare
                    </button>
                    <button class="btn btn-secondary" ng-click="minIvs()"
                            ng-class="atkIv === 0 && defIv === 0 && hpIv === 0 ? 'btn-dark' : ''">
                        Min
                    </button>
                    <button class="btn btn-secondary" ng-click="maxIvs()"
                            ng-class="atkIv === 15 && defIv === 15 && hpIv === 15 ? 'btn-dark' : ''">
                        Max
                    </button>
                </div>
            </div>

            <div class="row mt-4">
                <button  class="btn btn-dark ml-auto mr-3" ng-click="updateUrl()">
                    Save URL
                </button>
            </div>
        </form>
    </div>

    <!-- stats -->
    <table class="table table-fixed">
        <tr>
            <th>ATK</th>
            <th>DEF</th>
            <th>HP</th>
            <th>Bulk</th>
            <th>Total</th>
            <th>CP</th>
        </tr>
        <tr>
            <td>{{pokemon._atk}}</td>
            <td>{{pokemon._def}}</td>
            <td>{{pokemon._hp}}</td>
            <td>{{pokemon._bulk}}</td>
            <td>{{pokemon._total}}</td>
            <td>{{pokemon._cp}}</td>
        </tr>
    </table>
</div>

<!-- iv comparison -->
<div class="card mt-3" ng-show="showIvs()">
    <div class="card-body"></div>
    <table class="table table-fixed">
        <tr>
            <th colspan="2">IVs</th>
            <th>ATK</th>
            <th>DEF</th>
            <th>HP</th>
            <th>Bulk</th>
            <th>Tot</th>
            <th>CP</th>
            <th></th>
        </tr>
        <tr ng-repeat="ivs in getIvs()">
            <td colspan="2">{{ivs.ivs}}</td>
            <td>{{ivs.atk}}</td>
            <td>{{ivs.def}}</td>
            <td>{{ivs.hp}}</td>
            <td>{{ivs.bulk}}</td>
            <td>{{ivs.total}}</td>
            <td>{{ivs.cp}}</td>
            <td ng-click="removeIvs(ivs)">&times;</td>
        </tr>
    </table>
</div>

<!-- moves -->
<div class="card mt-3">
    <div class="card-header">
        <ul class="nav nav-tabs nav-fill card-header-tabs">
            <li class="nav-item">
                <div class="nav-link" ng-class="isPvp() ? 'active' : ''"
                     ng-click="showTab('pvpFast')">PvP</div>
            </li>
            <li class="nav-item">
                <div class="nav-link" ng-class="isPvp() ? '' : 'active'"
                     ng-click="showTab('pveFast')">PvE</div>
            </li>
        </ul>
    </div>

    <div class="card-body row" ng-show="isPvp()">
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Fast Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>T</th>
                        <th>DPT</th>
                        <th>EPT</th>
                    </tr>
                    <tr ng-repeat="move in getFastMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}"
                                     data-toggle="tooltip" data-placement="top" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pvpDamage}}</td>
                        <td>{{move.pvpEnergy}}</td>
                        <td>{{move.pvpTurns}}</td>
                        <td>{{move.pvpDpt}}</td>
                        <td>{{move.pvpEpt}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Charge Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>DPE</th>
                        <th colspan="2">Effect</th>
                    </tr>
                    <tr ng-repeat="move in getChargeMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}" title="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pvpDamage}}</td>
                        <td>{{move.pvpEnergy}}</td>
                        <td>{{move.pvpDpe}}</td>
                        <td colspan="2">{{move.pvpEffect}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="card-body row" ng-show="!isPvp()">
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Fast Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>CD</th>
                        <th>DPS</th>
                        <th>EPS</th>
                    </tr>
                    <tr ng-repeat="move in getFastMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}" alt="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pveDamage}}</td>
                        <td>{{move.pveEnergy}}</td>
                        <td>{{move.pveCooldown}}</td>
                        <td>{{move.pveDps}}</td>
                        <td>{{move.pveEps}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-12 col-lg-6 mt-2">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle">Charge Moves</h6>
                </div>
                <table class="table table-fixed">
                    <tr>
                        <th colspan="2">Move</th>
                        <th>Type</th>
                        <th>D</th>
                        <th>E</th>
                        <th>CD</th>
                        <th>DPE</th>
                        <th>DPS</th>
                    </tr>
                    <tr ng-repeat="move in getChargeMoves(pokemon)">
                        <td colspan="2">{{move.name}}</td>
                        <td>
                            <div class="icon ml-1" ng-class="move.type.toLowerCase()">
                                <img ng-src="{{getIconPath(move.type)}}" alt="{{move.type}}">
                            </div>
                        </td>
                        <td>{{move.pveDamage}}</td>
                        <td>{{move.pveEnergy}}</td>
                        <td>{{move.pveCooldown}}</td>
                        <td>{{move.pveDpe}}</td>
                        <td>{{move.pveDps}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>