<!--
    regex for converting pokemon data to JSON:
    ^(.+?)\t([A-Za-z ]+?)\t(\d+)\t(\d+)\t(\d+)\t([, A-Za-z\-]+)\t([, A-Za-z\-]+)$

    to replace:
    {\r\n\t"name": "$1",\r\n\t"type": "$2",\r\n\t"atk": $3,\r\n\t"def": $4,\r\n\t"hp": $5,\r\n\t"fastMoves": "$6",\r\n\t"chargeMoves": "$7"\r\n},
-->

<div class="p-3">
    <form>
        <div class="form-group row">
            <label class="col-1 col-form-label">Max CP:</label>
            <div class="col-2">
                <input class="form-control" ng-model="maxCP" />
            </div>
            <div class="btn btn-dark mr-3" ng-click="updateMaxCP(1500)">Great League (1500)</div>
            <div class="btn btn-dark mr-3" ng-click="updateMaxCP(2500)">Ultra League (2500)</div>
            <div class="btn btn-dark mr-3" ng-click="updateMaxCP(9999)">Master League (No Max)</div>
        </div>
        <div class="form-group row">
            <label class="col-1 col-form-label">ATK IV:</label>
            <div class="col-2">
                <input class="form-control" ng-model="atkIv" type="number"/>
            </div>
            <label class="col-1 col-form-label">DEF IV:</label>
            <div class="col-2">
                <input class="form-control" ng-model="defIv" type="number"/>
            </div>
            <label class="col-1 col-form-label">HP IV:</label>
            <div class="col-2">
                <input class="form-control" ng-model="hpIv" type="number"/>
            </div>
            <div class="col-1">
                <!-- -->
            </div>
            <div class="btn btn-dark mr-3" ng-click="refreshPage()">
                Refresh Page
            </div>
        </div>
    </form>
</div>
<div class="row">
    <div class="col-12">
        <table class="table table-hover table-fixed"
               st-table="displayedPokemons"
               st-safe-src="pokemons"
               st-persist="pokemonsTable">
            <thead>
                <tr>
                    <th></th>
                    <th class="sortable" colspan="3" st-sort="name">Pokemon</th>
                    <th class="sortable" colspan="2" st-sort="type">Type</th>
                    <th class="sortable" st-sort="_level">Level</th>
                    <th class="sortable" st-sort="_atk">ATK</th>
                    <th class="sortable" st-sort="_def">DEF</th>
                    <th class="sortable" st-sort="_hp">HP</th>
                    <th class="sortable" st-sort="_bulk">Bulk</th>
                    <th class="sortable" st-sort="_total">Total</th>
                    <th class="sortable" st-sort="_cp">CP</th>
                </tr>
                <tr>
                    <th></th>
                    <th colspan="3">
                        <input placeholder="Search Pokemon" class="form-control" type="search"
                               ng-model="searchPokemon" st-search="name" />
                    </th>
                    <th colspan="2">
                        <input placeholder="Search Types" class="form-control" type="search"
                               ng-model="searchType" st-search="type" />
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="pokemon in displayedPokemons track by pokemon.name"
                    ng-click="toggleFocusPokemon(pokemon.name)">
                    <td ng-bind="getRowNum($index)">
                        <!-- -->
                    </td>
                    <td colspan="3" class="td-overflow">
                        <a href="#!/pokemon/{{pokemon.name}}">{{pokemon.name}}</a>
                    </td>
                    <td colspan="2">
                        {{pokemon.type}}
                    </td>
                    <td>
                        {{evaluateLevel(pokemon)}}
                    </td>
                    <td>
                        {{pokemon._atk}}
                    </td>
                    <td>
                        {{pokemon._def}}
                    </td>
                    <td>
                        {{pokemon._hp}}
                    </td>
                    <td>
                        {{pokemon._bulk}}
                    </td >
                    <td>
                        {{pokemon._total}}
                    </td>
                    <td>
                        {{pokemon._cp}}
                    </td>
                </tr>
                <tr ng-show="isFocusPokemon(pokemon.name)" ng-repeat-end="">
                    <td></td>
                    <td colspan="5">{{pokemon.fastMoves}}</td>
                    <td colspan="7">{{pokemon.chargeMoves}}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="text-center" colspan="13">
                        <div st-pagination="" st-items-by-page="pageSize" st-displayed-pages="5"
                             st-page-change="setCurrentPage(newPage)"></div>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
